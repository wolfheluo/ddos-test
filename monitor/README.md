# 網絡連接監控面板

這是一個基於Python Flask的網絡監控應用程序，可以實時顯示系統的網絡連接數量、流量統計和系統資源使用情況。

## 功能特色

- 🌐 **詳細TCP/UDP統計**: 顯示TCP連接數、UDP連接數、半開連線數
- 📊 **精確流量監控**: 只計算程式啟動後的流量增量，而非系統累計流量
- 📦 **封包大小分析**: 顯示TCP和UDP的平均封包大小
- 🔍 **IP連接詳情**: 詳細顯示每個來源IP的連接數和流量統計
- 📋 **可排序表格**: 點擊表頭可按連接數、流量等進行排序
- 🖥️ **系統資源**: 監控CPU、記憶體和磁碟使用率
- 🎨 **美觀界面**: 響應式設計，支持手機和桌面瀏覽
- ⚡ **自動更新**: 每2-3秒自動刷新數據

## 安裝和使用

### 方法一：使用啟動腳本（推薦）

```bash
# 以root權限運行（需要綁定80端口）
sudo ./start.sh
```

### 方法二：手動安裝和運行

1. 安裝Python依賴：
```bash
pip3 install -r requirements.txt
```

2. 以root權限運行應用（需要綁定80端口）：
```bash
sudo python3 app.py
```

### 方法三：使用非特權端口

如果不想使用root權限，可以修改 `app.py` 中的端口號：

```python
# 將最後一行改為：
app.run(host='0.0.0.0', port=8080, debug=False)
```

然後正常運行：
```bash
python3 app.py
```

## 訪問應用

啟動成功後，在瀏覽器中訪問：
- 使用80端口: `http://localhost` 或 `http://your-server-ip`
- 使用其他端口: `http://localhost:8080` 或 `http://your-server-ip:8080`

## API端點

應用提供以下API端點：

- `GET /` - 主頁面（網絡監控面板）
- `GET /api/stats` - 獲取網絡統計數據（JSON格式）
- `GET /api/ip-details` - 獲取詳細的IP連接和流量信息
- `GET /api/system` - 獲取系統資源信息（JSON格式）

## 流量計算說明

**重要**: 應用顯示的流量是**程式啟動後的增量流量**，而不是系統開機以來的累計流量。

- 程式啟動時會記錄當前的系統流量作為基準值
- 所有顯示的流量數據都是相對於這個基準值的增量
- 這樣可以更準確地監控特定時間段內的網絡活動
- 基準信息會顯示在流量統計卡片中

## 依賴項

- Flask 2.3.3 - Web框架
- psutil 5.9.6 - 系統和進程監控
- Werkzeug 2.3.7 - WSGI工具包

## 系統要求

- Python 3.6+
- Linux/Unix系統（推薦）
- 足夠的權限來訪問網絡和系統統計信息

## 注意事項

1. **端口80權限**: 綁定80端口需要root權限
2. **防火牆設置**: 確保防火牆允許相應端口的連接
3. **系統權限**: 某些系統統計功能可能需要額外權限
4. **資源消耗**: 應用會定期查詢系統統計，會有輕微的資源消耗

## 故障排除

### 權限錯誤
```
Permission denied: 綁定80端口
```
解決方案：使用 `sudo` 運行應用

### 模塊未找到
```
ModuleNotFoundError: No module named 'flask'
```
解決方案：安裝依賴 `pip3 install -r requirements.txt`

### 端口被占用
```
Address already in use
```
解決方案：
1. 查找占用端口的進程：`sudo lsof -i :80`
2. 終止進程或使用其他端口

## 自定義

你可以通過修改以下文件來自定義應用：

- `app.py` - 後端邏輯和API
- `templates/index.html` - 前端界面和樣式
- `requirements.txt` - Python依賴

## 授權

此項目為開源項目，可自由使用和修改。
